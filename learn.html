<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Learn • Jelajahi Warisan Cirebon</title>
  <meta name="description" content="Halaman belajar interaktif tentang warisan budaya Cirebon: materi, video, kuis, dan progress belajar." />
  <style>
    :root {
      --primary: #13324A;
      --accent: #6FB2FF;
      --soft: #F2F6FA;
      --ink: #0F1B2A;
      --muted: #6B7A90;
      --ok: #10b981;
      --warn: #f59e0b;
      --danger: #ef4444;
      --radius: 16px;
      --shadow: 0 8px 24px rgba(15,27,42,0.08);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color: var(--ink); background: white;
    }

    /* Header */
    .topbar {
      position: sticky; top: 0; z-index: 50;
      background: linear-gradient(180deg, #ffffff 0%, #fbfdff 100%);
      border-bottom: 1px solid #e8eef6;
      backdrop-filter: saturate(180%) blur(8px);
    }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 16px; }
    .row { display: flex; align-items: center; gap: 12px; }
    .brand { display:flex; align-items:center; gap:10px; text-decoration: none; color: var(--primary); font-weight: 800; letter-spacing: 0.2px; }
    .brand-logo { width: 36px; height: 36px; border-radius: 10px; background: var(--primary); display:grid; place-items:center; color:white; box-shadow: var(--shadow); }
    .brand-logo svg { width: 22px; height: 22px; }

    nav { margin-left: auto; display: flex; gap: 10px; flex-wrap: wrap; }
    .nav-link { text-decoration:none; color: var(--muted); padding: 8px 12px; border-radius: 10px; font-weight: 600; }
    .nav-link.active, .nav-link:hover { color: var(--primary); background: var(--soft); }

    /* Hero/Search */
    .hero { padding: 24px 0 8px; }
    .hero h1 { margin: 0 0 8px; font-size: clamp(24px, 3.5vw, 36px); color: var(--primary); }
    .hero p { margin: 0; color: var(--muted); }

    .tools { margin-top: 16px; display: grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width: 720px) { .tools { grid-template-columns: 1fr 240px; } }

    .search { display:flex; align-items:center; gap:10px; background: white; border:1px solid #e8eef6; border-radius: 14px; padding: 10px 12px; box-shadow: var(--shadow); }
    .search input { flex:1; border:0; outline:0; font-size: 16px; background: transparent; color: var(--ink); }
    .search button { border:0; background: var(--primary); color:white; padding:10px 14px; border-radius: 12px; font-weight:700; cursor:pointer; }
    .search svg { opacity:.75; }

    .sorter { display:flex; gap:8px; align-items:center; }
    .select { appearance:none; border:1px solid #e8eef6; background: white; border-radius: 12px; padding: 10px 14px; font-weight:600; color: var(--ink); width: 100%; box-shadow: var(--shadow); }

    /* Filters */
    .filters { margin-top: 12px; display:flex; flex-wrap: wrap; gap:8px; }
    .chip { border:1px solid #e8eef6; background: #fff; color: var(--muted); padding: 8px 12px; border-radius: 999px; font-weight:700; cursor:pointer; }
    .chip.active, .chip:hover { background: var(--primary); border-color: var(--primary); color: white; }

    /* Grid */
    .grid { margin: 20px 0 32px; display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 540px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 960px) { .grid { grid-template-columns: repeat(3, 1fr); } }

    .card { position:relative; border:1px solid #e8eef6; border-radius: var(--radius); overflow:hidden; background: white; box-shadow: var(--shadow); display:flex; flex-direction: column; }
    .thumb { aspect-ratio: 16/9; background:#dbeafe; position:relative; overflow:hidden; }
    .thumb img { width: 100%; height: 100%; object-fit: cover; display:block; }
    .badge { position:absolute; top:10px; left:10px; background: rgba(19,50,74,.9); color:white; padding:6px 10px; border-radius: 999px; font-size: 12px; font-weight: 800; letter-spacing:.2px; }

    .content { padding: 14px; display:flex; flex-direction: column; gap: 10px; }
    .title { font-weight: 800; color: var(--ink); margin: 0; line-height:1.25; }
    .meta { font-size: 13px; color: var(--muted); display:flex; gap:10px; align-items:center; flex-wrap: wrap; }
    .tags { display:flex; gap:6px; flex-wrap: wrap; }
    .tag { font-size: 12px; font-weight: 800; padding:6px 10px; border-radius: 999px; background: var(--soft); color: var(--primary); }

    .progress { height: 8px; background:#eef2f7; border-radius: 999px; overflow:hidden; }
    .bar { height:100%; width:0%; background: linear-gradient(90deg, var(--accent), #8ad0ff); }

    .actions { display:flex; gap:8px; margin-top:auto; }
    .btn { border:0; cursor:pointer; font-weight:800; padding:10px 12px; border-radius: 12px; }
    .btn.primary { background: var(--primary); color:white; }
    .btn.ghost { background: var(--soft); color: var(--primary); }

    /* Pagination */
    .pager { display:flex; justify-content:center; gap:8px; }
    .page { border:1px solid #e8eef6; background:white; padding:10px 12px; border-radius:10px; font-weight:700; color:var(--muted); cursor:pointer; }
    .page.active, .page:hover { background: var(--primary); color:white; border-color: var(--primary); }

    /* Footer */
    footer { border-top:1px solid #e8eef6; background:#fbfdff; padding:20px 0; color:var(--muted); font-size:14px; }

    /* Modal */
    .modal { position: fixed; inset: 0; display:none; align-items:center; justify-content:center; padding: 20px; background: rgba(15,27,42,.55); backdrop-filter: blur(2px); z-index: 100; }
    .modal.open { display:flex; }
    .modal-card { width: min(100%, 920px); background:white; border-radius: 18px; overflow:hidden; box-shadow: var(--shadow); border:1px solid #e8eef6; }
    .modal-head { display:flex; align-items:center; justify-content:space-between; padding:12px 14px; background:#f9fbfe; border-bottom:1px solid #e8eef6; }
    .modal-head h3 { margin:0; font-size: 16px; color: var(--primary); font-weight: 900; letter-spacing:.2px; }
    .x { border:0; background: transparent; cursor: pointer; padding:8px; border-radius: 10px; }
    .x:hover { background: var(--soft); }
    .modal-body { aspect-ratio: 16/9; background:#000; }
    .modal-body iframe { width: 100%; height: 100%; display:block; border:0; }

    /* Utility */
    .hidden { display:none !important; }
  </style>
</head>
<body>
  <!-- Topbar / Nav -->
  <header class="topbar">
    <div class="wrap row">
      <a class="brand" href="index.html" aria-label="Beranda">
        <span class="brand-logo" aria-hidden>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12c0-4.418 3.582-8 8-8a8 8 0 1 1-5.657 13.657L4 20l2.343-2.343A7.965 7.965 0 0 1 4 12Z" fill="currentColor"/></svg>
        </span>
        <span>Jelajahi Warisan Cirebon</span>
      </a>
      <nav>
        <a class="nav-link" href="index.html">Beranda</a>
        <a class="nav-link active" href="#" aria-current="page">Belajar</a>
        <a class="nav-link" href="gallery.html">Galeri</a>
        <a class="nav-link" href="about.html">Tentang</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Hero / Search -->
    <section class="hero" aria-labelledby="judul">
      <h1 id="judul">Mulai Belajar Budaya Cirebon</h1>
      <p>Video singkat, materi ringkas, dan kuis untuk memahami sejarah & kesenian lokal.</p>

      <div class="tools">
        <form class="search" id="searchForm" role="search" aria-label="Cari materi">
          <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.5 21.5 20l-6-6Zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z" fill="currentColor"/></svg>
          <input id="q" name="q" type="search" placeholder="Cari: tari topeng, batik, sejarah, kuliner…" autocomplete="off"/>
          <button type="submit">Cari</button>
        </form>
        <div class="sorter">
          <select id="sort" class="select" aria-label="Urutkan">
            <option value="terbaru">Terbaru</option>
            <option value="durasi">Durasi Pendek</option>
            <option value="populer">Terpopuler</option>
            <option value="progres">Progres Kamu</option>
          </select>
        </div>
      </div>

      <div class="filters" role="group" aria-label="Filter topik">
        <button class="chip active" data-filter="semua" type="button">Semua</button>
        <button class="chip" data-filter="sejarah" type="button">Sejarah</button>
        <button class="chip" data-filter="kesenian" type="button">Kesenian</button>
        <button class="chip" data-filter="batik" type="button">Batik</button>
        <button class="chip" data-filter="kuliner" type="button">Kuliner</button>
        <button class="chip" data-filter="wisata" type="button">Wisata</button>
      </div>
    </section>

    <!-- Cards Grid -->
    <section class="grid" id="cards" aria-live="polite">
      <!-- Card Template (cloned by JS) -->
    </section>

    <!-- Pagination (static demo) -->
    <nav class="pager" aria-label="Navigasi halaman">
      <button class="page active" type="button">1</button>
      <button class="page" type="button">2</button>
      <button class="page" type="button">3</button>
    </nav>
  </main>

  <footer>
    <div class="wrap">
      © <span id="year"></span> Jelajahi Warisan Cirebon · Mode belajar ringan dan cepat.
    </div>
  </footer>

  <!-- Modal Video / Detail -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Pemutar video">
    <div class="modal-card">
      <div class="modal-head">
        <h3 id="modalTitle">Belajar</h3>
        <div class="row">
          <a id="listenBtn" href="#" target="_blank" rel="noopener" class="btn ghost" aria-label="Dengarkan di YouTube">
            <!-- YouTube icon -->
            <svg width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.5 12 3.5 12 3.5s-7.5 0-9.4.6A3 3 0 0 0 .5 6.2 31.1 31.1 0 0 0 0 12a31.1 31.1 0 0 0 .5 5.8 3 3 0 0 0 2.1 2.1c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2.1A31.1 31.1 0 0 0 24 12a31.1 31.1 0 0 0-.5-5.8ZM9.6 15.5v-7L16 12l-6.4 3.5Z" fill="currentColor"/></svg>
            &nbsp;Dengarkan
          </a>
          <button class="x" id="closeModal" aria-label="Tutup">
            <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.3 5.7 12 12m0 0-6.3 6.3M12 12l6.3 6.3M12 12 5.7 5.7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </div>
      <div class="modal-body">
        <iframe id="player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen title="YouTube video"></iframe>
      </div>
    </div>
  </div>

  <template id="cardTemplate">
    <article class="card" data-topik="">
      <div class="thumb">
        <img alt="Thumbnail materi" loading="lazy" />
        <span class="badge"></span>
      </div>
      <div class="content">
        <h3 class="title"></h3>
        <div class="meta">
          <span class="dur"></span> · <span class="lvl"></span>
        </div>
        <div class="tags"></div>
        <div class="progress" aria-label="Progres belajar">
          <div class="bar"></div>
        </div>
        <div class="actions">
          <button class="btn primary mulai" type="button">Mulai Belajar</button>
          <button class="btn ghost detail" type="button">Detail</button>
        </div>
      </div>
    </article>
  </template>

  <script>
    // ====== Data Dummy (gantikan dengan data asli / fetch dari backend) ======
    const MATERI = [
      {
        id: 'tari-topeng',
        judul: 'Tari Topeng Cirebon: Asal-usul & Makna',
        topik: ['kesenian'],
        durasi: '7:42',
        tingkat: 'Pemula',
        tags: ['Tari', 'Topeng', 'Budaya'],
        thumb: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?q=80&w=1200&auto=format&fit=crop',
        progress: 35,
        youtube: 'https://www.youtube.com/embed/SB_ANaKJEok?rel=0',
        listen: 'https://youtu.be/SB_ANaKJEok?si=LfTmQdFG3OycPmrr',
        label: 'Video'
      },
      {
        id: 'batik-megamendung',
        judul: 'Batik Megamendung: Motif, Filosofi, dan Proses',
        topik: ['batik', 'kesenian'],
        durasi: '9:15',
        tingkat: 'Menengah',
        tags: ['Batik', 'Motif', 'Workshop'],
        thumb: 'https://images.unsplash.com/photo-1544441892-65ea1231a7c2?q=80&w=1200&auto=format&fit=crop',
        progress: 10,
        youtube: 'https://www.youtube.com/embed/fCp6i3e6mdw?rel=0',
        listen: 'https://youtu.be/fCp6i3e6mdw?si=vZL-nClxatvu_WNc',
        label: 'Tutorial'
      },
      {
        id: 'sejarah-keraton',
        judul: 'Sejarah Keraton Kasepuhan: Jejak Sunda & Islam',
        topik: ['sejarah', 'wisata'],
        durasi: '12:03',
        tingkat: 'Pemula',
        tags: ['Keraton', 'Sunda', 'Islam'],
        thumb: 'https://images.unsplash.com/photo-1604822064780-acec4c0fdd6a?q=80&w=1200&auto=format&fit=crop',
        progress: 0,
        youtube: 'https://www.youtube.com/embed/sMW_fy8Lttg?rel=0',
        listen: 'https://youtu.be/sMW_fy8Lttg?si=pXFlvjVtJilhkKOn',
        label: 'Eksplorasi'
      },
      {
        id: 'kuliner-empal-gentong',
        judul: 'Kuliner Khas: Empal Gentong & Sejarahnya',
        topik: ['kuliner'],
        durasi: '6:21',
        tingkat: 'Pemula',
        tags: ['Kuliner', 'Empal', 'Sejarah'],
        thumb: 'https://images.unsplash.com/photo-1515003197210-e0cd71810b5f?q=80&w=1200&auto=format&fit=crop',
        progress: 55,
        youtube: 'https://www.youtube.com/embed/rRFKxtMd--E?rel=0',
        listen: 'https://youtu.be/rRFKxtMd--E?si=glqcYiSPeLHz8N4n',
        label: 'Video'
      },
      {
        id: 'wisata-bukit-cinta',
        judul: 'Wisata: Bukit Cinta Anti Galau',
        topik: ['wisata'],
        durasi: '4:59',
        tingkat: 'Pemula',
        tags: ['Wisata', 'Bukit Cinta'],
        thumb: 'https://images.unsplash.com/photo-1482192505345-5655af888cc4?q=80&w=1200&auto=format&fit=crop',
        progress: 80,
        youtube: 'https://www.youtube.com/embed/5qap5aO4i9A?rel=0',
        listen: 'https://youtu.be/5qap5aO4i9A',
        label: 'Highlight'
      }
    ];

    // ====== Render Cards ======
    const cardsEl = document.getElementById('cards');
    const template = document.getElementById('cardTemplate');

    function render(list) {
      cardsEl.innerHTML = '';
      list.forEach(item => {
        const node = template.content.cloneNode(true);
        const card = node.querySelector('.card');
        card.dataset.topik = item.topik.join(',');
        card.id = `card-${item.id}`;

        node.querySelector('img').src = item.thumb;
        node.querySelector('img').alt = `Materi: ${item.judul}`;
        node.querySelector('.badge').textContent = item.label;
        node.querySelector('.title').textContent = item.judul;
        node.querySelector('.dur').textContent = item.durasi;
        node.querySelector('.lvl').textContent = item.tingkat;

        const tags = node.querySelector('.tags');
        item.tags.forEach(t => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = t;
          tags.appendChild(span);
        });

        node.querySelector('.bar').style.width = `${item.progress}%`;

        // Buttons
        const btnMulai = node.querySelector('.mulai');
        btnMulai.addEventListener('click', () => openModal(item));
        const btnDetail = node.querySelector('.detail');
        btnDetail.addEventListener('click', () => openModal(item));

        cardsEl.appendChild(node);
      });
    }

    // ====== Search, Filter, Sort ======
    const chips = [...document.querySelectorAll('.chip')];
    let activeFilter = 'semua';

    chips.forEach(ch => ch.addEventListener('click', () => {
      chips.forEach(c => c.classList.remove('active'));
      ch.classList.add('active');
      activeFilter = ch.dataset.filter;
      applyQuery();
    }));

    document.getElementById('searchForm').addEventListener('submit', (e) => {
      e.preventDefault();
      applyQuery();
    });

    document.getElementById('sort').addEventListener('change', applyQuery);

    function applyQuery() {
      const q = document.getElementById('q').value.trim().toLowerCase();
      const sort = document.getElementById('sort').value;

      let list = MATERI.filter(m => {
        const matchFilter = activeFilter === 'semua' || m.topik.includes(activeFilter);
        const hay = `${m.judul} ${m.tags.join(' ')} ${m.topik.join(' ')}`.toLowerCase();
        const matchQ = !q || hay.includes(q);
        return matchFilter && matchQ;
      });

      list = list.slice();
      if (sort === 'durasi') {
        list.sort((a,b) => toSec(a.durasi) - toSec(b.durasi));
      } else if (sort === 'populer') {
        list.sort((a,b) => b.tags.length - a.tags.length);
      } else if (sort === 'progres') {
        list.sort((a,b) => b.progress - a.progress);
      } else {
        list.sort((a,b) => a.id.localeCompare(b.id));
      }

      render(list);
    }

    function toSec(mmss) {
      const [m,s] = mmss.split(':').map(Number); return m*60 + s;
    }

    // ====== Modal Logic ======
    const modal = document.getElementById('modal');
    const player = document.getElementById('player');
    const listenBtn = document.getElementById('listenBtn');

    function openModal(item) {
      document.getElementById('modalTitle').textContent = item.judul;
      player.src = item.youtube + '&autoplay=1';
      listenBtn.href = item.listen;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
    }

    function closeModal() {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
      player.src = '';
    }

    document.getElementById('closeModal').addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && modal.classList.contains('open')) closeModal(); });

    // ====== Init ======
    document.getElementById('year').textContent = new Date().getFullYear();
    render(MATERI);
  </script>
</body>
</html>
